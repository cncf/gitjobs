{% import "common.html" as common %}

<div class="flex justify-between">
  <div>
    <div class="text-sm text-gray-500 mb-2">{{ employer_details.company }}</div>
    <div class="flex items-baseline gap-x-10">
      {# Title #}
      <div class="text-4xl font-stretch-condensed font-medium text-gray-900 text-truncate">
        {{ job_details.title }}
      </div>
      {# End title #}

      {# Status badge #}
      <div>{% call common::job_status_badge(status = job_details.status, size = "md") %}</div>
      {# End status badge #}
    </div>
    <div class="mt-3 flex items-center space-x-5">
      {# Location badge #}
      {% let location = "{}, {}, {}"|format(job_details.city|display_some, job_details.state|display_some, job_details.country|display_some) %}
      {% match job_details.workplace %}
      {% when Workplace::Remote %}
      {% call common::badge(content = "remote", icon = "location") %}
      {% when Workplace::Hybrid %}
      {% call common::badge(content = "{} (hybrid)"|format(location), icon = "location") %}
      {% when Workplace::OnSite %}
      {% call common::badge(content = location, icon = "location") %}
    {% endmatch %}
    {# End location badge #}

    {# Type badge #}
    {% call common::badge(content = job_details.type_.to_string().replace("-", " "), icon = "calendar") %}
    {# End workplace type #}
  </div>
</div>
{# Logo #}
<div class="ml-5">
  <span class="relative flex size-[110px] shrink-0 overflow-hidden">
    <img class="aspect-square h-full w-full"
         alt="Logo company"
         height="110"
         width="110"
         src="/static/images/logo-test.jpg" />
  </span>
</div>
{# End logo #}
</div>
{# Content #}
<div class="mt-5">
  {# Company information #}
  {% call content_heading(content = "About company") %}
  <div>{{ employer_details.description }}</div>
  {# End company information #}

  {# Job description #}
  {% call content_heading(content = "Job description") %}
  <div>{{ job_details.description }}</div>
  {# End job description #}

  {# Compensantion #}
  {% call content_heading(content = "Compensation") %}
  <div>
    <div class="flex gap-x-5">
      {% if let Some(salary) = job_details.salary %}
        <div class="flex font-medium text-gray-900">
          {% call currency(value = job_details.salary_currency) %}
          {{ salary }}
        </div>
      {% else if let Some(salary_min) = job_details.salary_min %}
        <div class="flex items-center">
          <div class="flex font-medium text-gray-900">
            {% call currency(value = job_details.salary_currency) %}
            {{ salary_min }}
          </div>
          {% if let Some(salary_max) = job_details.salary_max %}
            <div class="flex text-gray-900 ms-2">
              -
              {% call currency(value = job_details.salary_currency) %}
              {{ salary_max }}
            </div>
          {% endif %}
        </div>
      {% else %}
        -
      {% endif %}

      {% if let Some(salary_period) = job_details.salary_period %}
        <div class="text-gray-500 ms-2">{{ salary_period }}</div>
      {% endif %}
    </div>
  </div>
  {# End compensantion #}

  {# Benefits #}
  {% if let Some(benefits) = job_details.benefits %}
    {% call content_heading(content = "Benefits") %}
    <div class="flex gap-x-5">
      {% for benefit in benefits %}
        {% call common::badge(content = benefit.replace("-", " ")) %}
      {% endfor %}
    </div>
  {% endif %}
  {# End benefits #}

  {# Skills #}
  {% if let Some(skills) = job_details.skills %}
    {% call content_heading(content = "Skills") %}
    <div class="flex gap-x-5">
      {% for skill in skills %}
        {% call common::badge(content = skill.replace("-", " ")) %}
      {% endfor %}
    </div>
  {% endif %}
  {# End skills #}
</div>
{# End content #}

{# Content heading #}
{% macro content_heading(content) %}
  <div class="text-md uppercase font-medium text-gray-500 pb-1 mb-5 mt-10 border-b">{{ content }}</div>
{% endmacro content_heading %}
{# End content heading #}

{# Currency #}
{% macro currency(value) %}
  {% if let Some(value) = value %}<div class="text-xs text-gray-500">{{ value }}</div>{% endif %}
{% endmacro %}
{# End currency #}
